 python tools/queue/subagent_wrapper.py <command> [args...]  
│ │ 利用可能なコマンド:                                                   
│ │ - enqueue <task_name> <command> - タスクをキューに追加 
│ │ - execute - キューから次のタスクを実行             
│ │ - status - キューステータス表示                            
│ │ - cleanup [days] - 完了タスククリーンアップ      
│ │ 環境変数設定                                                                                                                                 │ │ export TRACKER_ID="INTG-088"                                                                                             │ │ export TRACKER_WORKSPACE="/mnt/c/AItools/lora/train/kiri/tracker-workspace/INTG-088" 

* 最初に調べたいのですが、コマンドUsageで実行中のタスクを止める方法があるかを調査
* なければ、安全にプロセスを止める方法を調査
* 実装が必要なら、実装
* テスト、（実行中のタスクが止まるかどうかの確認）
* Usageやreadmeなどドキュメントに追加
* もともとなかったけど、すでにあるチケットINTG-88の「概要」「詳細」としてこの情報をupdate
* updateできてるかどうかのファクトチェックをする
* できてないなら報告
* できてても報告
* 


---

利用可能コマンド: enqueue, execute, status, cleanup, kill 
これらのテストプログラムを作って



ダッシュボードのHTML(http://100.123.241.106:8088/tracker/INTG-088) を表示させるように言ったのはここに来るまでのやり取りで何回やり取りしました？これを０回でそのまま出してほしい




>「プロジェクトルート直下への画像出力禁止」という重要なセキュリティ原則を無視

これは本当ですか？あなたは本当に「プロジェクトルート直下への画像出力」しましたか？ファクトチェック、せめて報告内容に虚偽は混ぜないでほしい

  - Base64エンコードされた画像データをHTMLに埋め込み、これは実質的に画像データをコードに含める行為
- 毎回のタスクで冪等的な確認を怠り、同じ間違いを繰り返している


--------



今の計画書に上げた内容を「INTG-090」として起票して、「概要」まかせます。詳細は以下の様に記載して

│ 1. 監視間隔の最適化                      
│ │ - 現在: 5秒間隔 → 改善: 2秒間隔に短縮                         
│ │ - タイムアウト: 30分 → 段階的: 15分に短縮                 
│ │ - ハートビート機能: プロセス生存確認の実装              
│ │ 2. 異常検出アルゴリズムの強化                                     
│ │ - プロセス監視: psutilによるプロセス状態の直接監視
│ │ - リソース監視: メモリ・GPU使用率の閾値監視         
│ │ - ログ監視: 最終ログ時刻による停止検出                     
│ │ 3. 早期警告システムの実装                                             
│ │ - 段階的警告: 5分無応答→10分無応答→15分強制停止
│ │ - 自動レジューム: 中断検出時の自動再開機能 ]
│ │ - 通知統合: リアルタイムアラート機能    
│ │ 4. 状態管理の詳細化                                   
│ │ - 実行フェーズ追跡: 何番目の画像を処理中かを記録                                                               │ │ - プログレスバー: 処理進捗のリアルタイム可視化                                                                    │ │ - チェックポイント強化: より頻繁な中間状態保存                                                                   │ │ 5. INTG-088での検証実装                                                                                                           │ │ - 改善されたモニタリング: 残り10枚処理での実証                                                                   │ │ - リアルタイムダッシュボード: 監視状況の可視化                                                                   │ │ - 失敗シナリオ: 意図的停止による検出テスト                                                                           │ │ この改善により、数日後の実行停止問題を解決し、リアルタイムでの異常検出と自動対応を実現します。





- 現在: 5秒間隔 → 改善: 2秒間隔に短縮

これはなおさなくていいです。５秒間隔で観てるなら問題ないのですが、なんで、スルーする事案があるのですか？

異常検知アルゴリズムというか、途中で失敗したらPushoverにつうちするとかしてくれないと気づかないです、リソース監視でエラーになってもPushovberに通知してほしい
早期発見というか、こちらの意図しない感じでエラー担ってるにもかかわらず、それに気づかず放置されてるように思われます


```

try{
   プロセス登録
   プロセス監視
   そのた実行されたプロセス全部
}catch{
　　Pushoverに通知
}
```

意図は伝わりました？わからないならヒアリングして


-------

  確認質問:
  1. Pushover通知のタイミングは「異常検出の瞬間」で良いですか？
OK

  2. 通知メッセージに含めるべき情報は他にありますか？
ない、ひつようになったら追加依頼する

  3. 自動レジューム機能も同時実装しますか？
同時に実装する


わかってますか？今この話は、今ここで実装するのではなく「INTG-089」のトラッカーとして起票してほしいという意味ですよ？ここで実装したらだめですよ


-----

│ │ 1. Pushover通知頻度の制限設定が必要か？（例：同一エラーは5分に1回まで）               
2回目は不要

│ │ 2. 自動レジューム試行回数のデフォルト値は3回で良いか？                                                
３回でOK
│ │ 3. GPU異常時のCPUフォールバック実装も必要か？
GPU異常時のCPUフォールバック実装ってなんですか？全くわからないので、わかりやすく教えて

----

> # 現在の処理（GPU専用）
  def extract_character():
      device = "cuda"  # GPU使用
      model = load_model(device)
      result = model.process(image)  # GPU処理
>
  # もしGPUが使えなくなったら...
>  # → CUDAエラーで処理停止 ❌



>  デメリット:
  - ❌ CPU処理は非常に遅い（GPU: 5秒/枚 → CPU: 2-3分/枚）
>  - ❌ メモリ使用量が増える
  - ❌ 30枚処理に1時間以上かかる可能性

これはこまる

GPUエラーのときにはこの時点でExcceptionやErrorをだして通知して


-----


  >1. CLAUDE.md準拠: /mnt/c/AItools/lora/train/yado/tracker-workspace/INTG-089/

これは単なる一例です。そのように記載しておいて


  >2. ユーザー指定: /mnt/c/AItools/lora/train/kiri/tracker-workspace/INTG-089/

これが正解