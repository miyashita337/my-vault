

# 開発ワークフロー
基本以下のようなワークフローでいつも開発してます、認識の相違があれば、気軽に指摘してほしい（いや実は全然テストなんて作ってませんでしたとか、動作検証はしてないとか、テストは〜〜しかやってないなど）
### ①PROGRESS_TRACKER.mdをみて、優先度の高いものからやる
プレイヤー：ClaudeCode
タスク粒度は一つづつやる

### ②実装前 テストを作る
プレイヤー：ClaudeCode
* * 対応内容を把握してテストファーストでテストを作る
* 基本的に機能を追加されるたびにテストも追加される
* バグが出るたびにテストを作る
* そのため、テスト数は多いいが、全部のテストを通すことはソフトウェアの品質の担保に繋がる（５〜１０分程度のテストは許容範囲、それ以上テストの時間がかかるなら、一旦ユーザーにヒアリングして方針を確認する）

### ③実装
プレイヤー：ClaudeCode
①のタスクを実装

### ④実装後
プレイヤー：ClaudeCode
* 動作検証をする検証方法は画像抽出して画像が出力されるまで*
* 動作検証後、テストを実行、ここでいうテストはUnitテスト。毎回やる
	* テストを実行、エラーなら実装に戻ってエラーがなくなるまで修正
	* 

### ⑤gpt-4oもしくはGeminiにキャラクター抽出ができてるか評価してもらう
プレイヤー：ClaudeCode＋gpt-4o(Gemini)
* これはOPTIONAL扱い、各それぞれのもデリには制限があるからLimit制限が来たら、エラーを出すが、エラーが出たとしてもそのまま続行する（なぜなら最終的には人間に夜評価があるから、AIによる評価はまだ努力目標レベル）

### ⑦人間の視覚で評価
プレイヤー：人間、ユーザー
評価内容が悪かったら①に最優先事項で追記してもう一度最初からワークフローを実行してもらう

### ⑧release
プレイヤー：ClaudeCode
claude カスタムスラッシュコマンドである　/relaaseコマンドでバージョンあげる



# 質問

* このワークフローを[Claude Code GitHub Actions](https://docs.anthropic.com/ja/docs/claude-code/github-actions)に置き換えることは可能か？
* いまCIを入れてないですが、入れることはできますか？
	* 多分いまユニットテストの実装があると思いますが、githuｂでも
* どこからの起点か？
	* ⑦人間の視覚で評価でISSUEや
	* ①PROGRESS_TRACKER.mdをみて、優先度の高いものからやるでISSUEを作ってそこからGithubActionを回すというかんじでしょうか？

## 不明点

不明点あればヒアリングして
　おそらくユーザーも CLaudeCodeGithubAction がどのように今までのワークフローから肩代わりができるかも想像がついてないと思います、
　たとえば「現状のワークフローの〜〜の部分をCLaudeCodeGithubActionのXXXの部分に置き換えれる」などの提案も含めておねがいしたい
不明点をすべて洗い出したら
PROGRESS_TRACKER.mdに追記して実行してほしい



# ヒアリングの答え

  ❓ ヒアリング事項

>  1. GitHub Organization/Repository
>    - 現在のforkリポジトリで作業を続けますか？
>    - 独自のプライベートリポジトリに移行しますか？

ここまでくると、独自プライベートリポジトリも考慮したいのですが、プライベートリポジトリにするメリット・デメリットがまだわからないので引き続き教えてほしい

>  2. API制限への対応
>    - GPT-4O/Gemini評価の頻度はどの程度必要ですか？
>    - コスト面での制約はありますか？

GPT-4Oは今GPT Plusプランです、限定的に使えるなら使いたいレベルというのと、画像生成や画像抽出のレビューや、画像抽出画像生成のアプローチがメイン
GeminiはまだFreeプラン
なのであくまで「使えたら」レベルなのでLimit制限がかかったらスルーしてほしい


>  3. 既存資産の移行
>    - PROGRESS_TRACKER.mdの内容をIssue化しますか？

最終的には移行しますが、１〜２日使ってみてダメだったら戻したいので一旦PROGRESS_TRACKER.mdは残しておいてください


>    - 既存テストをGitHub Actionsに統合しますか？

最終的には統合したい。１〜２日使ってみてダメだったら戻したいので一旦コピーと言う形にしておいてほしい


>  4. 開発フローの優先順位
>    - すべてを一度に移行？それとも段階的？

段階的、移行に失敗する、リスクもあるので一気にはこわい


>    - 最も自動化したい部分はどこですか？

①〜④

>  5. チーム構成
    - 現在は一人開発ですか？
    - 将来的にチーム開発の予定は？

ふえません、基本一人開発



--------------------------
 📚 作成したテンプレート


# ワークフローレビュー

## このシステムで利用するソフトウェアハードウェアの仕様
spec専用のmdファイルを作ってほしい
今はbatch_extraction_template.mdに一部まとまってますが、ちょっと足りてないのと他でも参照しているので一つにまとめたほうがいい
* ファイル名は：segment-anything/spec.md
	* つまりルート直下
* これらは、実装（MergeRequest, Pullequestなどの修正）の段階で随時更新すること、ユーザーである人間がMergeボタンを押しタイミングでこのspec.mdは更新される仕組みがほしい(githubのhooksとかでできないかな？)

内容は以下

```bash
# 必須ソフトウェア
- Python 3.8+
- CUDA対応GPU（推奨: 8GB VRAM以上）
- segment-anything v0.4.0
- ultralytics (YOLOv8)  
# 必須モデルファイル
- sam_vit_h_4b8939.pth (SAM ViT-H)
- yolov8x6_animeface.pt (アニメ特化YOLO)
```

適宜何かしら仕様変更によりspecが追加削除修正があるたびにここが変更されること
(localhostのUnitTestに追加して、一番最初にチェックしたほうがいい、どういうチェックかというとこのspec.mdの内容が実際の環境と一致してるかのチェックすること)
よくあるのが、バージョンが一致してないなど


##   1. バッチ抽出ワークフローテンプレート
  - ファイル: docs/workflows/batch_extraction_template.md
>  - 内容: kaname08の実行経験をベースにした標準化手順
  - 特徴: 環境準備から結果確認まで完全な手順書

* まずkanameなどの特定名などを実装や公開するmdファイルには記載しないこと
	* input path , output path の
	* あくまでそれはテストで利用しているファイルパスの一部である
	* そいわゆるDatasetNameの部分は動的に変わるので今日kanameという名前だったとしても来週別の名前になる可能性が高い
	* kaname~.pyを実行やkaname*.mdを参照というようなネーミングは辞めること

* 「環境要件」は
`../../spec.md を参照`
という形にして一元管理すること

> ls -la "$INPUT_DIR" | grep -E '\.(jpg|png)$' | wc -**l**

画像は「jpg」「png」「webp」の三種類とする






  
##   2. 進捗追跡テンプレート
  >- ファイル: docs/workflows/progress_tracking_template.md
  - 内容: リアルタイム進捗管理の構造化テンプレート
 > - 特徴: 自動化スクリプト連携機能付き

```
>- **バージョン**: segment-anything v0.4.0
>- **処理エンジン**: SAM + YOLOv8
```
バージョンや処理エンジンなど環境が変更するここも上がるような仕組みにしてほしい
0.4.0と固定にしてはダメです、毎回動的に変わります


##  3. 品質評価ガイド
>  - ファイル: docs/workflows/quality_evaluation_guide.md
  - 内容: A-F評価基準と詳細チェックポイント
>  - 特徴: 手動・自動評価の両方に対応


  4. トラブルシューティングガイド

  - ファイル: docs/workflows/troubleshooting_guide.md
  - 内容: 今回解決した問題を含む包括的な対処法
  - 特徴: 4段階の問題分類と緊急時対応

  🎯 テンプレートの活用方法

  # 新規バッチ処理時の手順
  1. batch_extraction_template.md → 標準手順に従って実行
  2. progress_tracking_template.md → 進捗管理ファイル作成
  3. quality_evaluation_guide.md → 結果の品質評価
  4. troubleshooting_guide.md → 問題発生時の対処