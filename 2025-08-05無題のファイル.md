# 方針


ワークフローの
  ちょっとした修正で、ワークフロー全体が全く動かなくなることが多々あります。それを解消するためには、骨となるunit testを作っておいて、それが動くかどうかのチェックをclaudeが毎回毎回なにか実装することに実行してそれが動作が問題ないかどうかをチェックするようにしてほしいです。
  
 
 ## 対応1
 
 
 まず新規作成でスクリプトソースコードを作る場合は、いちどユーザに確認を取ってください。そこでオッケーがもらい次第実装を開始してください。それ以外は既存ソースコードの修正をするようにしてほしいです。

## 対応2
 
  ワークフローのソースコードを最初から最後まで全て読み直してください。1行1行どういう実行しているかを確認して、その実行内容に沿ったユニットテストを作って下さい。ここでのユニットテストはきっちりちゃんと作って下さい、なんで通すことはせずならきちんとテストを作って【不明点あればヒアリング】ユニットテストを作ったらテスト実行して下さい。
  
  
  ユニットテストに沿ってないエラーが出た場合は
  そのエラーをどうすべきかをユーザーに確認して



--———-
返信

  

>Phase 1: 環境検証（行 9–29）
$1. sam-env/bin/python3 存在確認
1. 必須パッケージ（cv2, click, numpy）存在確認
2. Pushover 設定ファイル存在確認

>🔧 Phase 2: 設定・引数処理（行 31–60）
>1. TRACKER_ID 引数解析
　　　TRACKER_ID 自体に確定された仕様やフォーマットはなく、文字列であるだけが条件です、フォーマットでエラーにはしないように
2. WorkspaceConfig 動的読み込み

　　　config以下の設定ファイル全部チェックして
　　　　必要なら私が仕様を決めます

>3. 出力ディレクトリパス生成


　　　入力ディレクトリパスと同様
　　　未設定ならエラーにさせるなどを入れる


>4. TRACKER_ID 形式検証

　　　TRACKER_ID 自体に確定された仕様やフォーマットはなく、文字列であるだけが条件です、フォーマットでエラーにはしないように

>📂 Phase 3: ワークスペース準備（行 65–80）
>6. 必須ディレクトリ作成（extraction/, quality/, dashboard/, tests/）
>7. 既存抽出結果確認・スキップ判定


>🚀 Phase 4: 抽出パイプライン（行 82–150）
>1. 入力ディレクトリ存在・画像ファイル存在検証
. sam_yolo_character_segment.py バックグラウンド実行
>1. プロセス監視・ログ出力・完了確認

  ここはそのままオッケー
  
>📊 Phase 5: 品質チェック（行 152–180）
>1. 抽出結果レポート生成
>2. 統合品質チェック実行
> ダッシュボード生成
>3. 客観指標テスト実行
>4. 改善効果測定（ベースライン比較）

>📋 Phase 6: 結果出力（行 182–220）
>1. 実行サマリー生成
>2. 最終メッセージ出力
>3. Windows 通知送信

  
  

🎯 ユニットテスト設計前の確認

（ここでテスト対象や前提条件を精査）

  

  

  

この一覧、フローチャート化すれば実行手順の全体像を一目で把握できる仕様書にできます。

フローチャート化しますか？

